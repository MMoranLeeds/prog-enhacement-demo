(()=>{"use strict";var e,t={8321:(e,t,n)=>{var o,r,c;n.d(t,{b:()=>c,d:()=>o}),function(e){e[e.Small=576]="Small",e[e.Medium=768]="Medium",e[e.Large=992]="Large",e[e.ExtraLarge=1200]="ExtraLarge"}(o||(o={})),function(e){e.Department="department",e.Category="category"}(r||(r={})),function(e){e.FRUUGO="self",e.BYTEPLUS="bp"}(c||(c={}))},356:(e,t,n)=>{var o=n(7977),r=n(3992),c=n(8846),a=n(7741),i=n(8654),s=n(9299),d=n(6760),l=n(7461),u=n(1793),p=n(2130),m=n(4956),g=n(9324),w=n(2478),v=n(3626),y=n(9624),f=n(7273),h=n(4401),b=n(5905),k=n(8197),I=n(2809),x=n(6465);const L=new v.Yd(window.environment),_=(e,t,n)=>Math.max(t,Math.min(e,n)),S=document.getElementById("quantity-selector"),q=S?S.options.length:1;let $;const T=document.querySelector(".js-add-quantity-button"),E=document.querySelector(".js-remove-quantity-button"),C=document.querySelectorAll(".js-add-to-cart"),j=document.querySelectorAll(".js-buy-now");S&&(S.value=1);const A=e=>{const{skuInfo:t,currentCountry:n,currentLang:o}=window,{id:c}=t,a=document.querySelector(".js-shipping-cost"),i=e=>{C.forEach((t=>t.disabled=e)),j.forEach((t=>t.disabled=e))};i(!1),fetch(`/marketplace/api/shipping-cost/${c}?quantity=${e}&country=${n}&language=${o}`).then((e=>e.json())).then((e=>{const{shippingCost:t,numericShippingCost:n,hasAvailableShippingMethods:o}=e;if(!o){const e=window.currentLang===window.defaultLang?"":"language="+window.currentLang;return a.innerHTML=`<span class="text-danger">${(0,r.ag)("cart.itemnotavailable.notshippable",`/help?${e}`)}</span>`,void i(!0)}null!=n&&(a.innerHTML=n>0?`<span class="text-muted text-nowrap">${(0,r.ag)("product.paid.shipping",t)}</span>`:`<strong class="text-success text-nowrap">${(0,r.ag)("product.free.shipping")}</strong>`)})).catch((e=>L.error(e)))},P=()=>`\n    <div class="Product__Section modal_payment_section">\n        <span class="text-center d-block mb-3">${(0,r.ag)("product.modal.acceptedpaymentmethods")}</span>\n        <div class="text-center">${(0,m.h)()}</div>\n    </div>\n`,H=(e,t="#")=>{const n=e?`<a href=${t} class="btn btn-orange pdp-modal-checkout-cta" referrerpolicy="no-referrer-when-downgrade">${(0,r.ag)("product.modal.checkout")}</a>`:"";return`\n        <div class="modal-action-buttons d-flex flex-column-reverse flex-sm-row justify-content-between Product__Section ${e?"cart-valid":"cart-invalid"}">\n            <a href="#" class="btn btn-success pdp-modal-continue-shopping-cta js-modal-close">${(0,r.ag)("product.modal.continueshopping")}</a>\n            <a href="${window.pageUrls.cartUrl}" class="btn btn-dark pdp-modal-view-basket-cta">${(0,r.ag)("product.modal.viewbasket")}</a>\n            ${n}\n        </div>\n    `};function D(){C&&C.forEach((e=>{e.addEventListener("click",(e=>{!function(e){e.preventDefault();const{skuId:t}=document.getElementById("add-to-cart").dataset,n=_(S.value,1,q);(0,w.PK)(t,n).then((e=>{const t=document.querySelector(".pdp-atc-content");if(null===t)return;const o=document.querySelector(".modal-buttons-container");if(e.cartValid?o.innerHTML=H(!0,e.checkoutUrl):o.innerHTML=H(!1),!0===e.success){window.totalCartItems=e.totalItemsInCart;const o=document.querySelector(".js-cart-counter");o&&(o.classList.remove("d-none"),o.innerText=e.totalItemsInCart),t.innerHTML=(e=>{const{images:t,price:n,shipping:o}=window.skuInfo,c=window.voucher,a=document.querySelector(".js-product-title").textContent.trim(),i=n.totalInclTaxAfterDiscount?n.totalInclTaxAfterDiscount:n.totalInclTax,s=n.totalInclTaxAfterDiscount?`<p class="cost__rrp">${(0,r.ag)("product.recommendedPrice")}<del> ${n.totalInclTax}</del></p>`:"",d=c?`<p class="cost__rrp">${(0,r.ag)("product.saving")} <span class="cost__price">${n.totalDiscount} </span><span class="cost__price">(${n.discountPercentage})<span></p>`:n.numericDiscountPercentage?`<p class="savings_shipping_small d-block">-${n.discountPercentage}</p>`:"",l=o.methods&&o.methods.some((e=>0===e.numericPrice))?`<span class="savings_shipping_small d-block free_shipping">${(0,r.ag)("product.free.shipping")}</span>`:"",u=!0===n.taxCalculationRequiredInCheckout?`<small class="text-muted">${(0,r.ag)("product.tax.checkout")}</small>`:"",p=`<p class="cost__rrp">${(0,r.ag)("product.voucher.voucher-discount",n.voucherDiscount)}</p>`;return`\n        <h4>${(0,r.ag)("product.modal.addedtocart")}</h4>\n        <div class="row modal-product-details">\n           <div class="col-2 d-none d-sm-block">\n            <img src=${t.urlSmall} alt="Thumbnail image" />\n           </div>\n          <div class="col-12 col-sm-10 row">\n            <em class="col-2 col-sm-1 p-sm-0 mr-sm-2">${e} x</em>\n            <div class="col row pr-0">\n              <div class="col-12 col-sm p-0">\n                <span class="modal_product_title">${a}</span>\n                ${l}\n                ${u}\n              </div>\n              <div class="${c?"col-12 col-sm-7":"col"} p-0 pl-sm-2 pr-sm-0 cost">\n                ${s}\n                ${c?`${p}`:""}\n                ${d}\n                <p>${(0,r.ag)("product.price")} <span class="cost__price">${i}</span></p>\n              </div>\n            </div>\n          </div>\n      </div>\n    `})(n)}else t.innerHTML=`<div class="alert alert-danger">${e.message}</div>`;(0,a.$o)(window.skuInfo,n),(0,b.ZH)({eventType:"add-to-cart",attributes:{userCountry:{text:[window.currentCountry]},userLanguage:{text:[window.currentLang]},retailerId:{text:[window.retailerId]},retailerName:{text:[window.retailerName]},retailerCountry:{text:[window.retailerCountry]}},productDetails:[{product:{id:window.productId,name:window.skuInfo.title},quantity:n}],cartId:e.cartId.toString()}),(0,d.q)("AddToCart",{value:window.skuInfo.price.numericTotalInclTax,currency:window.skuInfo.price.currencyCode,contents:[{id:window.skuInfo.productId,quantity:n}],content_type:"product"}),(0,k.GU)(window.productId)})).catch((()=>{const e=document.querySelector(".pdp-atc-content");null!==e&&(e.innerHTML=`<div class="alert alert-danger">${(0,r.ag)("cart.generic.error")}</div>`,document.querySelector(".modal-buttons-container").innerHTML=H(!1))}));const o=(0,r.ag)("product.modal.closebasket");(0,s.f7)(`\n    <div class="pdp-atc-content-wrapper">\n        <div class="pdp-atc-content">\n            <img src="/marketplace/images/loader.svg" class="loader" style="width:50px; height:auto;display:block;margin:20px auto;"/>\n        </div>\n        <div class="modal-buttons-container"></div>\n        ${P()}\n    </div>\n`,o,"modal-fade modal-pdp-add-to-cart")}(e)}))})),j&&j.forEach((e=>{e.addEventListener("click",(e=>{!function(e){e.preventDefault(),document.querySelectorAll("button.js-buy-now").forEach((e=>{e.disabled=!0,e.classList.add("btn-loading")}));const{skuId:t}=document.getElementById("add-to-cart").dataset,n=_(S.value,1,q);(0,w.cT)(t,n).then((e=>{if(!1===e.cartValid||!e.checkoutUrl)throw new Error;e.itemAddedToCart?((0,a.og)(window.skuInfo,n),(0,b.ZH)({eventType:"add-to-cart",attributes:{userCountry:{text:[window.currentCountry]},userLanguage:{text:[window.currentLang]},retailerId:{text:[window.retailerId]},retailerName:{text:[window.retailerName]},retailerCountry:{text:[window.retailerCountry]}},productDetails:[{product:{id:window.productId,name:window.skuInfo.title},quantity:n}],cartId:e.cartId.toString()}),(0,d.q)("AddToCart",{value:window.skuInfo.price.numericTotalInclTax,currency:window.skuInfo.price.currencyCode,contents:[{id:window.skuInfo.productId,quantity:n}],content_type:"product"}),(0,k.ri)(window.productId),setTimeout((()=>{window.location.href=e.checkoutUrl}),75)):window.location.href=e.checkoutUrl})).catch((()=>{window.location.href="/cart"}))}(e)}))}))}function O(e,t){e.innerHTML=M(),(0,u.Z)(t).then((t=>{const n=JSON.parse(t.response);if(null===n.recommendedLinks)throw new Error("no links");e.innerHTML=B(n)})).catch((()=>{e.innerHTML=""}))}const M=()=>'<img src="/marketplace/images/loader.svg" class="loader" style="width:50px; height:auto; display:block; margin:20px auto;" />',B=({titleLink:e,seeAllLink:t,recommendedLinks:n})=>`<div>\n    <h2><a href="${e.href}">${e.text}</a></h2>\n    <ul class="list-unstyled">\n        ${n.map((e=>`<li><a href="${e.link.href}">${e.link.text} <span>(${e.count})</span></a></li>`)).join("")}\n    </ul>\n    <a href="${t.href}">${t.text}</a>\n</div>\n`;!async function(){await(0,r.QE)(),(0,c.Z)(),function(){const e=document.querySelector(".js-sticky-trigger"),t=document.body.getBoundingClientRect().top;if(e){const n=e.getBoundingClientRect().top;(0,g.ih)(1280,(()=>{(0,i.ds)(".js-sticky",n-t-18,"d-xl-block")}))}}(),(0,i.Cu)(),function(){const e=document.querySelector(".ProductGallery--carousel"),t=e.querySelectorAll(".ProductGallery__Item"),n=e.querySelector(".glide__bullets");(0,g.ih)(992,!1,(()=>{t.length>1&&(new o.ZP(e,{perView:1,animationDuration:600,direction:"true"===window.rtl?"rtl":"ltr"}).mount({Controls:o.ZX,Swipe:o.oF,Images:o.rU}),n.classList.remove("d-none"))}),!0),(0,g.ih)(992,(()=>{const e=".js-hover-zoom";if(document.querySelector(".js-gallery-thumbs")){const t=document.querySelector(".js-gallery-thumbs").querySelectorAll(".js-gallery-thumb");t.forEach((n=>{const o=n.getAttribute("data-image").replace("_max","_0100_0100"),r=new Image;r.src=o,r.className="ProductGallery__Thumb__Image",r.setAttribute("onerror","handleImageError(this)"),n.appendChild(r),n.addEventListener("click",(function(n){n.currentTarget.classList.add("ProductGallery__Thumb--active"),t.forEach((e=>{n.currentTarget!==e&&e.classList.remove("ProductGallery__Thumb--active")}));const o=n.currentTarget.dataset.image;document.querySelector(e).querySelector("img").setAttribute("src",o)}))}))}!function(e){const t=document.querySelector(e).querySelector("img");document.querySelector(e).addEventListener("mouseover",(function(e){const n=t.naturalWidth,o=e.currentTarget.getAttribute("class"),r=document.getElementsByClassName(o)[0].offsetWidth;if(r<n){const e=n/r;t.style.transform="scale("+e+")"}else t.style.cursor="default"})),document.querySelector(e).addEventListener("mouseout",(function(){t.style.transform="scale(1)"})),document.querySelector(e).addEventListener("mousemove",(function(e){const n=t.naturalWidth,o=e.currentTarget.getAttribute("class"),r=document.getElementsByClassName(o)[0],c=r.offsetWidth,a=r.offsetHeight,i=r.getBoundingClientRect().left,s=r.getBoundingClientRect().top;c<n&&(t.style.transformOrigin=(e.pageX-i)/c*100+"%"+(e.pageY-s)/a*100+"%")}))}(e)}))}(),function(){const e=document.querySelector(".js-delivery-container"),t=document.querySelector(".js-delivery-toggle"),n=document.querySelectorAll(".js-delivery-open");(0,y.H)("cxo2-224-delivery-info","C")&&(0,g.wy)(e),t&&t.addEventListener("click",(t=>{t.preventDefault(),(0,g.wy)(e);const n=!!e.classList.contains("is-visible");(0,b.xo)("custom_event","pdp-delivery-returns",n?"view":"hide")})),n&&n.forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault();const n=t.currentTarget.getAttribute("data-analytics-action");(0,g.qw)(e),(0,b.xo)("custom_event","pdp-delivery-returns",n)}))}))}(),D(),(0,l.l)(),(0,I.A)(),(0,p.Z)(),function(){const e=document.querySelector(".js-recommended-categories");if(null===e)return;const{brandName:t}=e.dataset;void 0===t||["no brand","unbranded","n/a"].includes(t.toLowerCase())?e.style.display="none":O(e,`/marketplace/api/recommendations/category?brand=${t}&language=${window.currentLang}`)}(),function(){const e=document.querySelector(".js-recommended-brands");if(null===e)return;const{categoryCode:t}=e.dataset;O(e,`/marketplace/api/recommendations/brand?category=${t}&language=${window.currentLang}`)}(),function(){const e=document.querySelectorAll(".js-retailer-modal-open");e&&e.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=document.querySelector(".js-retailer-modal-content").cloneNode(!0);t.classList.remove("d-none");const n=(0,r.ag)("search.page.close");(0,s.f7)(t,n,"modal-fade retailer-modal","modal-lg","pb-16"),document.querySelector(".modal-body").insertAdjacentHTML("beforeend",P()),(0,b.xo)("custom_event","pdp-delivery-returns","retailer-info-view")}))}))}(),function(){const e=document.querySelectorAll(".js-retailer-modal-open");e&&e.forEach((e=>{e.addEventListener("click",(function(){(0,b.xo)("custom_event","pdp-delivery-returns","retailer-shop-view")}))}));const t=document.querySelector(".js-delivery-analytics");if(t){const e=new IntersectionObserver((t=>{const n=t[0];n.isIntersecting&&(e.unobserve(n.target),(0,b.xo)("custom_event","pdp-delivery-returns","visible"))}),{threshold:1});e.observe(t)}}(),document.querySelector(".pdp-modal-continue-shopping-cta")&&document.querySelector(".pdp-modal-continue-shopping-cta").addEventListener("click",(function(){(0,b.xo)("custom_event","pdp-atc-modal-interaction","click-continue")})),document.querySelector(".pdp-modal-view-basket-cta")&&document.querySelector(".pdp-modal-view-basket-cta").addEventListener("click",(function(){(0,b.xo)("custom_event","pdp-atc-modal-interaction","click-basket")})),document.querySelector(".pdp-modal-checkout-cta")&&document.querySelector(".pdp-modal-checkout-cta").addEventListener("click",(function(){(0,b.xo)("custom_event","pdp-atc-modal-interaction","click-checkout"),(0,b.xo)("legacy_event","checkout interaction","commence checkout"),gtag("event","begin_checkout",{items:(0,a.iU)([{quantity:1,sku:window.skuInfo}],"product")})})),(()=>{if(!S)return;const e=(e,t)=>{e.preventDefault();let n=parseInt(S.value);n=_(n+t,1,q),S.value=n,T.disabled=n===q,E.disabled=1===n,A(n)};T.addEventListener("click",(t=>e(t,1))),E.addEventListener("click",(t=>e(t,-1)))})(),(0,b.ZH)({eventType:"detail-page-view",attributes:{userCountry:{text:[window.currentCountry]},userLanguage:{text:[window.currentLang]},retailerId:{text:[window.retailerId]},retailerName:{text:[window.retailerName]},retailerCountry:{text:[window.retailerCountry]}},productDetails:[{product:{id:window.productId,name:window.skuInfo.title}}]}),(0,d.q)("ViewContent",{value:window.skuInfo.price.numericTotalInclTax,currency:window.skuInfo.price.currencyCode,content_ids:[window.skuInfo.productId],content_type:"product",content_category:window.breadcrumbs.map((e=>e.text)).reduce(((e,t)=>`${e} > ${t}`))}),(0,k.Rg)({id:window.skuInfo.productId,list_name:window.pageType}),(0,i.am)(),(0,i.lt)(),function(){const e=document.querySelectorAll(".js-product-gallery-pill"),t="ProductGallery__Pill--close";e&&(clearTimeout($),e.forEach((e=>{$=setTimeout((()=>{e.classList.add(t)}),6e3);const n=e.querySelector(".js-product-pill-close");n&&n.addEventListener("click",(()=>{e.classList.add(t)})),e.addEventListener("animationend",(t=>{"move-down"===t.animationName&&e.classList.add("d-none")}))})))}(),S&&S.addEventListener("change",(e=>A(e.target.value))),(0,f.i)(),(0,h.f)(),document.addEventListener("consentUpdate",(()=>{(0,k.Rg)({id:window.skuInfo.productId,list_name:window.pageType}),setTimeout((()=>{!function(){if((0,y.H)("SHOP-858-BPCarousels","B")){const e=(0,v.Ys)(".js-bp-carousel-container"),t=(0,v.Ys)(".js-fruugo-carousel-container");e.classList.remove("d-none"),t.remove(),(0,l.A)(),window.dispatchEvent(new Event("resize"))}}()}),1500)})),(0,y.H)("SHOP-858-BPCarousels","B")&&(0,l.A)(),new x.A(".js-read-more-list").init()}()},5854:(e,t,n)=>{n.d(t,{Z:()=>o});const o={dev:"DEV",test:"TEST",production:"PRODUCTION"}}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var c=n[e]={exports:{}};return t[e](c,c.exports,o),c.exports}o.m=t,e=[],o.O=(t,n,r,c)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,r,c]=e[l],i=!0,s=0;s<n.length;s++)(!1&c||a>=c)&&Object.keys(o.O).every((e=>o.O[e](n[s])))?n.splice(s--,1):(i=!1,c<a&&(a=c));if(i){e.splice(l--,1);var d=r();void 0!==d&&(t=d)}}return t}c=c||0;for(var l=e.length;l>0&&e[l-1][2]>c;l--)e[l]=e[l-1];e[l]=[n,r,c]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.j=18,(()=>{var e={18:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,c,[a,i,s]=n,d=0;if(a.some((t=>0!==e[t]))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(s)var l=s(o)}for(t&&t(n);d<a.length;d++)c=a[d],o.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return o.O(l)},n=globalThis.webpackChunkmarketplace=globalThis.webpackChunkmarketplace||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=o.O(void 0,[647,736],(()=>o(356)));r=o.O(r)})();
//# sourceMappingURL=product.bundle.js.map